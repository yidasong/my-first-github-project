![image-20241230140802607](C:\Users\宋奕达\AppData\Roaming\Typora\typora-user-images\image-20241230140802607.png)

![ee531adf-2825-4637-bb00-6ce72b8ad092](C:\Users\宋奕达\Desktop\ee531adf-2825-4637-bb00-6ce72b8ad092.png)

好的，明白了。我将为你提供完整的配置步骤，包括路由器、交换机和PC，并使用 `2001:0db8:0000:0006::1` 这种缩写形式的IPv6地址。考虑到你使用的是华为eNSP，我将使用华为命令行风格。

**IPv6地址规划 (修改后)**

| 设备      | 接口           | IPv6地址            | VLAN ID |
| --------- | -------------- | ------------------- | ------- |
| **L3SW1** | GE 0/0/1       | 2001:db8:0:1::1/64  | 1       |
|           | GE 0/0/2       | 2001:db8:0:2::1/64  | 2       |
|           | GE 0/0/3       | 2001:db8:0:10::1/64 | -       |
| **L3SW2** | GE 0/0/1       | 2001:db8:0:10::2/64 | -       |
|           | GE 0/0/2       | 2001:db8:0:20::1/64 | -       |
|           | GE 0/0/3       | 2001:db8:0:3::1/64  | 3       |
|           | GE 0/0/4       | 2001:db8:0:30::1/64 | -       |
| **RT1**   | Ethernet 0/0/0 | 2001:db8:0:30::2/64 | -       |
|           | Ethernet 0/0/1 | 2001:db8:0:4::1/64  | 4       |
| **RT2**   | Ethernet 0/0/0 | 2001:db8:0:20::2/64 | -       |
|           | Ethernet 0/0/1 | 2001:db8:0:6::1/64  | 6       |
| **PC1**   | Ethernet 0/0/1 | 2001:db8:0:1::2/64  | -       |
|           | 默认网关       | 2001:db8:0:1::1/64  | -       |
| **PC2**   | Ethernet 0/0/1 | 2001:db8:0:2::2/64  | -       |
|           | 默认网关       | 2001:db8:0:2::1/64  | -       |
| **PC3**   | Ethernet 0/0/1 | 2001:db8:0:3::2/64  | -       |
|           | 默认网关       | 2001:db8:0:3::1/64  | -       |
| **PC4**   | Ethernet 0/0/1 | 2001:db8:0:4::2/64  | -       |
|           | 默认网关       | 2001:db8:0:4::1/64  | -       |
| **PC5**   | Ethernet 0/0/1 | 2001:db8:0:6::2/64  | -       |
|           | 默认网关       | 2001:db8:0:6::1/64  | -       |

**部署步骤:**

1.  **启动eNSP**

    *   打开eNSP，按照拓扑图拖拽设备，包括两台L3交换机（L3SW1和L3SW2），两台路由器（RT1和RT2）和五台PC。
    *   使用连接线连接设备，确保连接方式与拓扑图一致。
    *  启动所有设备。
2. **配置L3SW1:**

```
<Huawei>system-view
[Huawei]sysname L3SW1
[L3SW1]vlan batch 1 2
[L3SW1]interface Vlanif 1
[L3SW1-Vlanif1]ipv6 enable
[L3SW1-Vlanif1]ipv6 address 2001:db8:0:1::1/64
[L3SW1-Vlanif1]quit
[L3SW1]interface Vlanif 2
[L3SW1-Vlanif2]ipv6 enable
[L3SW1-Vlanif2]ipv6 address 2001:db8:0:2::1/64
[L3SW1-Vlanif2]quit
[L3SW1]interface GigabitEthernet 0/0/1
[L3SW1-GigabitEthernet0/0/1]port link-type access
[L3SW1-GigabitEthernet0/0/1]port default vlan 1
[L3SW1-GigabitEthernet0/0/1]quit
[L3SW1]interface GigabitEthernet 0/0/2
[L3SW1-GigabitEthernet0/0/2]port link-type access
[L3SW1-GigabitEthernet0/0/2]port default vlan 2
[L3SW1-GigabitEthernet0/0/2]quit
[L3SW1]interface GigabitEthernet 0/0/3
[L3SW1-GigabitEthernet0/0/3]ipv6 enable
[L3SW1-GigabitEthernet0/0/3]ipv6 address 2001:db8:0:10::1/64
[L3SW1-GigabitEthernet0/0/3]quit
[L3SW1]rip
[L3SW1-rip-1]ipv6 rip
[L3SW1-rip-1]network 2001:db8::/32
[L3SW1-rip-1]quit
```
3.  **配置L3SW2:**

```
<Huawei>system-view
[Huawei]sysname L3SW2
[L3SW2]vlan batch 3
[L3SW2]interface Vlanif 3
[L3SW2-Vlanif3]ipv6 enable
[L3SW2-Vlanif3]ipv6 address 2001:db8:0:3::1/64
[L3SW2-Vlanif3]quit
[L3SW2]interface GigabitEthernet 0/0/1
[L3SW2-GigabitEthernet0/0/1]ipv6 enable
[L3SW2-GigabitEthernet0/0/1]ipv6 address 2001:db8:0:10::2/64
[L3SW2-GigabitEthernet0/0/1]quit
[L3SW2]interface GigabitEthernet 0/0/2
[L3SW2-GigabitEthernet0/0/2]ipv6 enable
[L3SW2-GigabitEthernet0/0/2]ipv6 address 2001:db8:0:20::1/64
[L3SW2-GigabitEthernet0/0/2]quit
[L3SW2]interface GigabitEthernet 0/0/3
[L3SW2-GigabitEthernet0/0/3]port link-type access
[L3SW2-GigabitEthernet0/0/3]port default vlan 3
[L3SW2-GigabitEthernet0/0/3]quit
[L3SW2]interface GigabitEthernet 0/0/4
[L3SW2-GigabitEthernet0/0/4]ipv6 enable
[L3SW2-GigabitEthernet0/0/4]ipv6 address 2001:db8:0:30::1/64
[L3SW2-GigabitEthernet0/0/4]quit
[L3SW2]rip
[L3SW2-rip-1]ipv6 rip
[L3SW2-rip-1]network 2001:db8::/32
[L3SW2-rip-1]quit
[L3SW2]ospfv3 1
[L3SW2-ospfv3-1]area 0
[L3SW2-ospfv3-1-area-0.0.0.0]network 2001:db8:0:20::/64
[L3SW2-ospfv3-1-area-0.0.0.0]network 2001:db8:0:30::/64
[L3SW2-ospfv3-1-area-0.0.0.0]quit
[L3SW2-ospfv3-1]quit
```
4.  **配置RT1:**

```
<Huawei>system-view
[Huawei]sysname RT1
[RT1]interface Ethernet 0/0/0
[RT1-Ethernet0/0/0]ipv6 enable
[RT1-Ethernet0/0/0]ipv6 address 2001:db8:0:30::2/64
[RT1-Ethernet0/0/0]quit
[RT1]interface Ethernet 0/0/1
[RT1-Ethernet0/0/1]ipv6 enable
[RT1-Ethernet0/0/1]ipv6 address 2001:db8:0:4::1/64
[RT1-Ethernet0/0/1]quit
[RT1]ospfv3 1
[RT1-ospfv3-1]area 0
[RT1-ospfv3-1-area-0.0.0.0]network 2001:db8:0:30::/64
[RT1-ospfv3-1-area-0.0.0.0]network 2001:db8:0:4::/64
[RT1-ospfv3-1-area-0.0.0.0]quit
[RT1-ospfv3-1]quit
```
5.  **配置RT2:**

```
<Huawei>system-view
[Huawei]sysname RT2
[RT2]interface Ethernet 0/0/0
[RT2-Ethernet0/0/0]ipv6 enable
[RT2-Ethernet0/0/0]ipv6 address 2001:db8:0:20::2/64
[RT2-Ethernet0/0/0]quit
[RT2]interface Ethernet 0/0/1
[RT2-Ethernet0/0/1]ipv6 enable
[RT2-Ethernet0/0/1]ipv6 address 2001:db8:0:6::1/64
[RT2-Ethernet0/0/1]quit
[RT2]ospfv3 1
[RT2-ospfv3-1]area 1
[RT2-ospfv3-1-area-0.0.0.1]network 2001:db8:0:20::/64
[RT2-ospfv3-1-area-0.0.0.1]network 2001:db8:0:6::/64
[RT2-ospfv3-1-area-0.0.0.1]quit
[RT2-ospfv3-1]quit
```
6.  **配置PC:**

    *   在eNSP的PC上，使用以下命令配置IPv6地址和网关。
    *   打开PC的命令行界面。
    *   使用`netsh interface ipv6 add address "Ethernet0" address=<IPv6地址>/64`命令设置IPv6地址，使用`netsh interface ipv6 set address name="Ethernet0" gateway=<默认网关>` 设置网关
    
    **PC1:**
    ```
    netsh interface ipv6 add address Ethernet0 address=2001:db8:0:1::2/64
    netsh interface ipv6 set address name="Ethernet0" gateway=2001:db8:0:1::1
    ```
    
    **PC2:**
    ```
    netsh interface ipv6 add address Ethernet0 address=2001:db8:0:2::2/64
    netsh interface ipv6 set address name="Ethernet0" gateway=2001:db8:0:2::1
    ```
    **PC3:**
      ```
    netsh interface ipv6 add address Ethernet0 address=2001:db8:0:3::2/64
    netsh interface ipv6 set address name="Ethernet0" gateway=2001:db8:0:3::1
      ```
    
    **PC4:**
    ```
    netsh interface ipv6 add address Ethernet0 address=2001:db8:0:4::2/64
    netsh interface ipv6 set address name="Ethernet0" gateway=2001:db8:0:4::1
    ```
    **PC5:**
        ```
    netsh interface ipv6 add address Ethernet0 address=2001:db8:0:6::2/64
    netsh interface ipv6 set address name="Ethernet0" gateway=2001:db8:0:6::1
    ```
7. **验证连通性:**

    *  在PC上使用 `ping <目标IPv6地址>` 命令来测试连通性，例如从PC1 ping PC2：`ping 2001:db8:0:2::2`。
    *  在路由器和交换机上使用 `display ipv6 routing-table`  命令查看路由表是否正确。
    *  在L3交换机上使用`display vlan` 命令查看vlan信息。
    *   在路由器和交换机上使用 `display ospfv3 peer` 命令查看 OSPFv3 邻居是否建立成功。

**配置解释：**

*   **VLAN配置:** 创建VLAN，并配置VLAN接口的IPv6地址。
*   **物理接口配置:** 设置物理接口的模式，加入相应的VLAN，配置链路IPv6地址。
*   **RIP配置:** 启动RIP，宣告网络地址。
*   **OSPFv3配置:** 启动OSPFv3，配置区域，宣告网络地址。
*  **PC配置:** 配置IPv6地址和默认网关。

**注意：**

*   请确保你的eNSP版本支持OSPFv3和IPv6。
*   所有配置命令都基于华为设备。
*   在配置完成后进行测试，保证全网连通。
*   仔细核对每一个步骤，避免配置错误。
*  可以逐步配置，配置完一部分设备就进行测试，方便排查错误。

现在你可以按照以上步骤，在你的eNSP环境中部署这个网络。如有其他问题，请随时提出。